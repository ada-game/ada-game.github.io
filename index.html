<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ada Typing Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #game-container {
            text-align: center;
        }
        #typing-area {
            font-size: 2em;
            margin: 20px 0;
            letter-spacing: 2px;
            position: relative;
        }
        .untyped {
            color: #ccc;
        }
        .typed {
            color: #000;
        }
        #cursor {
            display: inline-block;
            width: 2px;
            height: 1.2em;
            background-color: #000;
            animation: blink 0.7s infinite;
            position: absolute;
            bottom: 0.05em; /* Corrected positive offset */
        }
        @keyframes blink {
            50% { opacity: 0; }
        }
        #score {
            font-size: 1.5em;
            margin: 20px 0;
        }
        #dev-sidebar {
            position: fixed;
            right: 0;
            top: 0;
            background-color: #ddd;
            padding: 10px;
            border-left: 1px solid #999;
            height: 100vh;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>Ada Typing Game</h1>
        <div id="typing-area"></div>
        <div id="score">Score: 0</div>
    </div>

    <div id="dev-sidebar">
        <h2>Developer Tools</h2>
        <button id="reset-button">Reset Game</button>
    </div>

    <script>
        const text = "hello world";
        let typedIndex = 0;
        let score = 0;
        let typingArea = document.getElementById('typing-area');
        let scoreDisplay = document.getElementById('score');
        const resetButton = document.getElementById('reset-button');
        const devSidebar = document.getElementById('dev-sidebar');

        function initGame() {
            typedIndex = 0;
            score = 0;
            updateScore();
            renderGame();
        }

        function renderGame() {
            typingArea.innerHTML = '<span id="cursor"></span>' + text.split('').map((char, index) => 
                `<span class="${index < typedIndex ? 'typed' : 'untyped'}">${char}</span>`
            ).join('');
            positionCursor();
        }

        function positionCursor() {
            const cursor = document.getElementById('cursor');
            if (typedIndex < text.length) {
                const nextChar = typingArea.children[typedIndex + 1];
                cursor.style.left = `${nextChar.offsetLeft}px`;
            } else {
                cursor.style.left = `${typingArea.lastElementChild.offsetLeft + typingArea.lastElementChild.offsetWidth}px`;
            }
        }

        function updateScore() {
            scoreDisplay.textContent = `Score: ${score}`;
            saveGame();
        }

        function handleKeypress(event) {
            if (typedIndex < text.length && event.key === text[typedIndex]) {
                typedIndex++;
                score++;
                updateScore();
                renderGame();
            }
        }

        function resetGame() {
            initGame();
            saveGame();
        }

        function saveGame() {
            localStorage.setItem('adaTypingScore', score.toString());
            localStorage.setItem('adaTypingIndex', typedIndex.toString());
        }

        function loadGame() {
            const savedScore = localStorage.getItem('adaTypingScore');
            const savedIndex = localStorage.getItem('adaTypingIndex');
            if (savedScore !== null && savedIndex !== null) {
                score = parseInt(savedScore);
                typedIndex = parseInt(savedIndex);
                updateScore();
                renderGame();
            }
        }

        const devMode = true;
        devSidebar.style.display = devMode ? 'block' : 'none';

        // Initial setup
        initGame();
        loadGame();

        // Event listeners
        document.addEventListener('keypress', handleKeypress);
        resetButton.addEventListener('click', resetGame);
    </script>
</body>
</html>
